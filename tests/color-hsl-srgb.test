# -*- tcl -*- tcl.tk//DSL tcltest//EN//2.0 tcl.tk//DSL tcltest//EN//2.0
## (c) 2023 Andreas Kupries
# # ## ### ##### ######## ############# #####################
## AKTIVE. Color conversion -- sRGB / HSL round trip
##         Both directions.

kt check Tcl     8.6
kt check tcltest 2

# # ## ### ##### ######## ############# #####################

kt local testing aktive

kt source support/util.tcl

# # ## ### ##### ######## ############# #####################
## Syntax

syntax {
    sRGB src
} {aktive op color HSL to}

syntax {
    HSL src
} {aktive op color sRGB to}

# # ## ### ##### ######## ############# #####################
## Round trip of the 216 web "standard" colors

foreach-color 3 [webcolor-table-fp] rgb bands {
    set b ([join $bands ,])

    # for the complementary round trip
    set hsl    [aktive op color sRGB to HSL $rgb]
    set hbands [pixels/ $hsl]
    set hb     ([join $hbands ,])

    incr k

    # # ## ### ##### ######## ############# #####################

    test aktive-op-color-sRGB-to-HSL-2.${k}-$b "aktive op color sRGB to HSL, round trip ($bands)" -body {
	pixels aktive op color HSL to sRGB \
	    [aktive op pass \
		 [aktive op color sRGB to HSL $rgb]]
    } -match pixels -result $bands

    test aktive-op-color-HSL-to-sRGB-2.${k}-$hb "aktive op color HSL to sRGB, round trip ($hbands)" -body {
	pixels aktive op color sRGB to HSL \
	    [aktive op pass \
		 [aktive op color HSL to sRGB $hsl]]
    } -match pixels -result $hbands
}

unset rgb bands b hsl hbands hb k
# # ## ### ##### ######## ############# #####################
cleanupTests
return
