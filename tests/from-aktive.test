# -*- tcl -*- tcl.tk//DSL tcltest//EN//2.0 tcl.tk//DSL tcltest//EN//2.0
## (c) 2023,2024 Andreas Kupries
# # ## ### ##### ######## ############# #####################
## AKTIVE. Reading AKTIVE

kt check Tcl     8.6 9
kt check tcltest 2

# # ## ### ##### ######## ############# #####################

kt local testing aktive

kt source support/util.tcl

# # ## ### ##### ######## ############# #####################
## Syntax

syntax {
    aktive args
} {aktive read from}

# # ## ### ##### ######## ############# #####################
##

foreach {k d cons expected} {
    0 1 graybox {
	=  0      = 0.0159 = 0.0317 = 0.0476 = 0.0635 = 0.0794 = 0.0952 = 0.1111
	=  0.1270 = 0.1429 = 0.1587 = 0.1746 = 0.1905 = 0.2063 = 0.2222 = 0.2381
	=  0.2540 = 0.2698 = 0.2857 = 0.3016 = 0.3175 = 0.3333 = 0.3492 = 0.3651
	=  0.3810 = 0.3968 = 0.4127 = 0.4286 = 0.4444 = 0.4603 = 0.4762 = 0.4921
	=  0.5079 = 0.5238 = 0.5397 = 0.5556 = 0.5714 = 0.5873 = 0.6032 = 0.6190
	=  0.6349 = 0.6508 = 0.6667 = 0.6825 = 0.6984 = 0.7143 = 0.7302 = 0.7460
	=  0.7619 = 0.7778 = 0.7937 = 0.8095 = 0.8254 = 0.8413 = 0.8571 = 0.8730
	=  0.8889 = 0.9048 = 0.9206 = 0.9365 = 0.9524 = 0.9683 = 0.9841 = 1
    }
    1 3 colorbox {
	=  0      0.8889 1      = 0.0159 0.7619 0.9841 = 0.0317 0.6349 0.9683 = 0.0476 0.5079 0.9524
	=  0.0635 0.3810 0.9365 = 0.0794 0.2540 0.9206 = 0.0952 0.1270 0.9048 = 0.1111 0      0.8889
	=  0.1270 0.9048 0.8730 = 0.1429 0.7778 0.8571 = 0.1587 0.6508 0.8413 = 0.1746 0.5238 0.8254
	=  0.1905 0.3968 0.8095 = 0.2063 0.2698 0.7937 = 0.2222 0.1429 0.7778 = 0.2381 0.0159 0.7619
	=  0.2540 0.9206 0.7460 = 0.2698 0.7937 0.7302 = 0.2857 0.6667 0.7143 = 0.3016 0.5397 0.6984
	=  0.3175 0.4127 0.6825 = 0.3333 0.2857 0.6667 = 0.3492 0.1587 0.6508 = 0.3651 0.0317 0.6349
	=  0.3810 0.9365 0.6190 = 0.3968 0.8095 0.6032 = 0.4127 0.6825 0.5873 = 0.4286 0.5556 0.5714
	=  0.4444 0.4286 0.5556 = 0.4603 0.3016 0.5397 = 0.4762 0.1746 0.5238 = 0.4921 0.0476 0.5079
	=  0.5079 0.9524 0.4921 = 0.5238 0.8254 0.4762 = 0.5397 0.6984 0.4603 = 0.5556 0.5714 0.4444
	=  0.5714 0.4444 0.4286 = 0.5873 0.3175 0.4127 = 0.6032 0.1905 0.3968 = 0.6190 0.0635 0.3810
	=  0.6349 0.9683 0.3651 = 0.6508 0.8413 0.3492 = 0.6667 0.7143 0.3333 = 0.6825 0.5873 0.3175
	=  0.6984 0.4603 0.3016 = 0.7143 0.3333 0.2857 = 0.7302 0.2063 0.2698 = 0.7460 0.0794 0.2540
	=  0.7619 0.9841 0.2381 = 0.7778 0.8571 0.2222 = 0.7937 0.7302 0.2063 = 0.8095 0.6032 0.1905
	=  0.8254 0.4762 0.1746 = 0.8413 0.3492 0.1587 = 0.8571 0.2222 0.1429 = 0.8730 0.0952 0.1270
	=  0.8889 1      0.1111 = 0.9048 0.8730 0.0952 = 0.9206 0.7460 0.0794 = 0.9365 0.6190 0.0635
	=  0.9524 0.4921 0.0476 = 0.9683 0.3651 0.0317 = 0.9841 0.2381 0.0159 = 1      0.1111 0
    }
} {
    set rpath  [R format-$cons.aktive]
    set config [dict create path $rpath]
    set meta   [dict create path $rpath label $cons]

    test aktive-read-from-aktive-2chan-2.$k "aktive read from aktive, $cons" -body {
	astcl aktive read from aktive path [R format-$cons.aktive]
    } -match image -result [makei read::from::aktive 0 0 8 8 $d $config $expected $meta]

    unset rpath config meta
}

# # ## ### ##### ######## ############# #####################
unset k d cons expected
cleanupTests
return
